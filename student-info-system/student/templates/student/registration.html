{% extends 'base.html' %}

{% block title %}Student Portal: Registration{% endblock %}

{% block header_name %} Registration {% endblock %}

{% block content %}
<form action="{% url 'student:registration' %}" method="post">
{% csrf_token %}
  <select name="semester">
  {% for semester in semesters %}
    <option value={{semester.id}}>{{semester.name}}</option>
  {% endfor %}
  </select>
  <input type="submit" name="Select Semester">
</form>
  {% if not courses %}
    <p>No courses offered</P>
  {% else %}
    <form action="{% url 'student:registration' %}" method="post">
    {% csrf_token %}
      <table>
      <tr>
        <th>Number</th>
        <th>Title</th>
        <th>Credits</th>
        <th>Description</th>
        <th>Prerequisites</th>
      </tr>
      {% for course in courses %}
        <tr>
          <td>{{course.name}}</td>
          <td>{{course.title}}</td>
          <td>{{course.credits_earned}}</td>
          <td>{{course.description}}</td>
          <td>{% for prereq in course.prereqs.all %}{{prereq}}{% endfor %}</td>
        <tr id="childRow">
          <th>Section Number</th>
          <th>Professor</th>
          <th>Schedule</th>
          <th>Open Seats</th>
          <th>Select</th>
        </tr>
        {% for section in sections %}
          {% ifequal section.course course %}
            <tr id="childRow">
              <td>{{section.number}}</td>
              <td>{{section.professor_name}}</td>
              <td>{{section.hours}}</td>
              <td>{{section.capacity}}</td>
              <td><input type="radio" name="{{course.name}}" value="{{section.id}}"><td>
              <input type="hidden" name="course" value="{{course.name}}">
            </tr>
          {% endifequal %}
        {% endfor%}
      {% endfor %}
  {% endif %}
  </table>
<input type="submit" name="Register">
</form>
{% endblock content %}
    
