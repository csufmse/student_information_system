{% extends 'base.html' %}
{% load static %}
{% load bootstrap3 %}

{% block css %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="{% static 'schooladmin/styles.css' %}">
<style>
</style>

{% endblock css %}

{% block title %}Student Info System Administration{% endblock %}
{% block header_name %}Student Info System Administration{% endblock header_name %}

{% block content %}
    <div>
    <span>
<dl class="dl-horizontal">
  <dt>Logged in as</dt>
  <dd>{{ user.username }}</dd>
  <dt>User Role</dt>
  <dd>{{ user.access_role }}</dd>
</dl>
    <a
            class="btn btn-primary"
            href="{% url 'logout' %}">Log Out</a>
</span>
</div>

<div class="tab">
  <button class="tablinks" id="defaultOpen">Users</button>
  <button class="tablinks">Majors</button>
  <button class="tablinks">Semesters</button>
  <button class="tablinks">Courses</button>
  <button class="tablinks">Sections</button>
</div>

<span height="400" width="300">
<iframe id="Users" class="tabcontent samplecontentblock" title="Admin Users" src="{% url 'schooladmin:users' %}"
    ></iframe>
<iframe id="Majors" class="tabcontent" title="Majors" src="{% url 'schooladmin:majors' %}"
    ></iframe>
<iframe id="Semesters" class="tabcontent" title="Semesters" src="{% url 'schooladmin:semesters' %}"
    ></iframe>
<iframe id="Courses" class="tabcontent" title="Courses" src="{% url 'schooladmin:courses' %}"
    ></iframe>
<iframe id="Sections" class="tabcontent" title="Sections" src="{% url 'schooladmin:sections' %}"
    ></iframe>
</span>

<script>
var buffer = 25; // scroll bar buffer
var samplecontentblock = document.getElementsByClassName('samplecontentblock')[0];
var defaultButton = document.getElementById("defaultOpen")
var defaultButtonWidth = defaultButton.offsetWidth;

function pageY(elem) {
    return elem.offsetParent ? (elem.offsetTop + pageY(elem.offsetParent)) : elem.offsetTop;
}

// resize iframe based on window size/resize
function resizeContentBlocks() {
    var width = window.innerWidth;
    var height = document.documentElement.clientHeight;

    width = width - defaultButtonWidth - buffer;

    height -= pageY(samplecontentblock) + buffer;
    height = (height < 0) ? 0 : height;

    for (const tc of document.getElementsByClassName('tabcontent')) {
        tc.style.height = height + 'px';
        tc.style.width = width + 'px';
    }
}

// handle tab button clicks. Relies on the content (frame) id be the same as the button text
// that lights it up.
function openChunk(evt) {
  var chunkName = this.innerText;

  // Get all elements with class="tabcontent" and hide them
    for (const tc of document.getElementsByClassName("tabcontent")) {
        if (tc.id == chunkName) {
            tc.style.display = "block";
        } else {
            tc.style.display = "none";
        }
    }

    // Get all elements with class="tablinks" and remove the class "active"
    for (const link of document.getElementsByClassName("tablinks")) {
        link.className = link.className.replace(" active", "");
    }

    // Show the current tab, and add an "active" class to the link that opened the tab
    document.getElementById(chunkName).style.display = "block";
    this.className += " active";
}

// Add onclick to each tab button so that it displays the contents
for (const link of document.getElementsByClassName('tablinks')) {
    link.addEventListener("click", openChunk, false);
}

// .onload doesn't work with IE8 and older.
if (samplecontentblock.attachEvent) {
    samplecontentblock.attachEvent("onload", resizeContentBlocks);
} else {
    samplecontentblock.onload=resizeContentBlocks;
}

window.onresize = resizeContentBlocks;

// start the page with the default tab
defaultButton.click();
</script>
{% endblock %}